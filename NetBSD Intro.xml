<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD Simplified DocBook XML V1.0//EN"
"http://www.oasis-open.org/docbook/xml/simple/1.0/sdocbook.dtd">
<article>
  <title>NetBSD 3.0 Installation Quick and Clean</title>

  <subtitle>This document is aimed at gathering the best way to properly
  install NetBSD 3.0 on your machine, as quick as possible, with 3 sample
  configurations : server, desktop, development workstation</subtitle>

  <section>
    <title>Prerequisites</title>

    <para>For the following, I assume that you have a broadband connection, so
    you are able to download easily the needed files.</para>

    <para>I also assume that you have a basic knowledge of BSD systems, and I
    pass some details. If something is unclear for you can refer to the <ulink
    url="http://www.netbsd.org/guide/en/">NetBSD Guide</ulink> which explains
    all the details you might need.</para>

    <para>However I will try to include as much details as possible so even
    "BSD-dummies" can install NetBSD.</para>

    <para>If there is any problem or you are not sure of what to do, just read
    the <ulink url="http://www.netbsd.org/guide/en/">NetBSD
    Guide.</ulink></para>

    <para>If something is wrong in here, or if it needs to be improved, just
    send me a <ulink url="mailto:asmodehn@gna.org">mail</ulink>.</para>
  </section>

  <section>
    <title>New Installation</title>

    <para></para>

    <section>
      <title>Using Floppies</title>

      <para></para>
    </section>

    <section>
      <title>Using ISO Images</title>

      <para></para>
    </section>

    <section>
      <title>SysInst</title>

      <para>The root is big enough with 256MB as nothing big gets written in
      it except the kernels which are usually less than 8MB.</para>

      <para>I personaly advise for a /var of 2GB size at least if you dont
      want to bother to much after installation about it. Many things get
      written in there by default. (logs, mails, pkg database, temp
      uncompress, etc.)</para>

      <para>The default for /tmp should be enough.</para>

      <para>Balance the remaining space between /usr and /home, depending of
      the number of user (/home bigger) and software installed (/usr
      bigger)</para>

      <para>Then you might want to add softdep on FFSv1 for /usr, and /home
      (not safe enough for /root and /var in my own opinion...)</para>
    </section>
  </section>

  <section>
    <title>First Boot : Basic Setup</title>

    <para></para>

    <para>There is a very helpful tool from 2.0 : sushi, but when I tested it
    (on 2.0), it made some mistakes in rc.conf... so I won't tell about it for
    the moment. Let's do all the work by hand ;-)</para>

    <para>First just log as root, and define a passwd for the root user, if
    you haven't done it before.</para>

    <para>Second change the keyboard layout temporarily :</para>

    <para>wsconsctl -k -w encoding=fr</para>

    <para></para>

    <para>If you want to change the default shell for the new added user :
    edit the /etc/usermgmt.conf</para>

    <para>vi /etc/usermgmt.conf</para>

    <para></para>

    <para>for example I'd prefer ksh instead of csh :</para>

    <para>shell/bin/ksh</para>

    <para></para>

    <para>And add a user, which can su to root, and add a password :</para>

    <para>useradd -G wheel -m &lt;username&gt;</para>

    <para>passwd &lt;username&gt;</para>

    <para></para>

    <para>Now if you don't want sendmail as your default mailer, you can edit
    the /etc/mailer.conf file, to comment sendmail lines and uncomment postfix
    ones.</para>

    <para>You can now edit /etc/fstab to add entries for cdrom and floppy.
    Simply add those lines :</para>

    <para>/dev/cd0 /mnt/cdrom cd9660 ro,noauto 0 0</para>

    <para>/dev/fd0 /mnt/floppy msdos rw,noauto 0 0</para>

    <para></para>

    <para>Then you have to create those directories :</para>

    <para>mkdir /mnt/cdrom /mnt/floppy</para>

    <para></para>

    <para>Do the same for any device you may want to mount. "man fstab" is
    your friend.</para>

    <para>Test it and go ahead for the rc.conf configuration...</para>

    <para>vi /etc/rc.conf</para>

    <para></para>

    <para>For Advanced Power Management, add :</para>

    <para>apmd=YES</para>

    <para></para>

    <para>If you are connected to a DHCP server, and want to use the network
    information it can provide :</para>

    <para>dhclient=YES dhclient_flags=”&lt;interface&gt;”</para>

    <para></para>

    <para>&lt;interface&gt; means the network interface that appear in dmesg.
    For me “ne0”.</para>

    <para>If you are not, you can provide static network information like this
    :</para>

    <para>_______________TODO________________</para>

    <para></para>

    <para>You should define a default name in /etc/myname. This will be the
    result of the 'hostname' command, and may be used in some
    applications.</para>

    <para>Now your network interface is ready, we can reboot and go on.</para>

    <para></para>

    <para>If you don't want to build your customized kernel, just edit
    rc.local to load local keymap at every boot :</para>

    <para>echo "wsconsctl -k -w encoding=fr" &gt;&gt; /etc/rc.local</para>

    <para></para>

    <para>If you don't want to customize your kernel, or if don't feel good
    with command-line based tools, you can go ahead to "Installing Usefull
    Software" and come back here later...</para>

    <para></para>

    <para>Configuring console : edit ttys after recompiling kernel...</para>

    <para>pb : console events...</para>

    <para>edit rc.conf for dhclient...</para>

    <para>nice prompt...</para>

    <para></para>
  </section>

  <section>
    <title>Second Boot : Installing Useful Software</title>

    <para></para>
  </section>

  <section>
    <title>Customization 1 : Optimizing your Kernel</title>

    <para></para>
  </section>

  <section>
    <title>Customization 2 : Keeping your OS up-to-date using CVS...</title>

    <para></para>
  </section>
</article>